<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>ドット絵メーカー</title>
    <style>
        table { border-collapse: collapse; }
        td {
            width: 20px; height: 20px;
            border: 1px solid #ccc;
            cursor: pointer;
        }
        .palette-btn {
            width: 30px; height: 30px; border: none; margin: 2px;
        }
    </style>
</head>
<body>
    <h2>ドット絵メーカー</h2>
    <div>
        <button class="palette-btn" style="background:#FF0000" onclick="selectColor('#FF0000')"></button>
        <button class="palette-btn" style="background:#0000FF" onclick="selectColor('#0000FF')"></button>
        <button class="palette-btn" style="background:#00FF00" onclick="selectColor('#00FF00')"></button>
        <button class="palette-btn" style="background:#FFFFFF; border:1px dashed #888" onclick="selectColor('#FFFFFF')">消</button>
        <button onclick="clearCanvas()">クリア</button>
        <span id="selected-color-label">選択色: <span id="selected-color-box" style="display:inline-block;width:20px;height:20px;vertical-align:middle;background:#FF0000;"></span></span>
    </div>
    <br>
    <table id="dot-canvas">
        {% for y in range(height) %}
        <tr>
            {% for x in range(width) %}
            <td data-x="{{x}}" data-y="{{y}}" style="background:{{canvas[y][x]}}"></td>
            {% endfor %}
        </tr>
        {% endfor %}
    </table>
    <script>
        let selectedColor = '#FF0000';
        function selectColor(color) {
            selectedColor = color;
            document.getElementById('selected-color-box').style.background = color;
        }
        function clearCanvas() {
            document.querySelectorAll('#dot-canvas td').forEach(td => {
                td.style.background = '#FFFFFF';
            });
        }
        document.querySelectorAll('#dot-canvas td').forEach(td => {
            td.addEventListener('mousedown', function(e) {
                this.style.background = selectedColor;
            });
        });
    </script>
</body>
</html> 